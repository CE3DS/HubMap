<svg class="lineSvg" *ngIf="this.parentBlock">
    <line [attr.x1]="this.block.position.x + (this.block.size.width / 2)"
        [attr.y1]="this.block.position.y  + (this.block.size.height / 2)"
        [attr.x2]="this.parentBlock.position.x  + (this.parentBlock.size.width / 2)"
        [attr.y2]="this.parentBlock.position.y + (this.parentBlock.size.height / 2)"
        [style.stroke]="this.block.backgroundColor" />
</svg>

<block (selectBlockEvent)="emitSelect($event)" (click)="blockSelected = false"
    *ngFor="let childBlock of this.block.blocks" [block]="childBlock" [parentBlock]="this.block">
</block>

<style-editor [clickInside]="clickInside" [block]="block" *ngIf="blockSelected">
</style-editor>

<div type="text" class="block" cdkDragBoundary=".canvas" cdkDrag [cdkDragFreeDragPosition]="block.position"
    (click)="clickInside()" [style.background-color]="block.backgroundColor" (cdkDragMoved)="onDrag($event)">

    <div [style.border-color]="block.backgroundColor" class="highlighted" *ngIf="blockSelected"></div>

    <div class="highlighted darker" *ngIf="blockSelected">
        <button [style.color]="block.backgroundColor" matTooltip="Adicionar Bloco Acima" [matTooltipPosition]="'above'"
            class="addBlockUpIcon" matTooltipClass="tooltip" mat-icon-button (click)="addBlock('above')">
            <mat-icon>keyboard_arrow_up</mat-icon>
        </button>
        <button [style.color]="block.backgroundColor" matTooltip="Adicionar Bloco a Direita"
            [matTooltipPosition]="'right'" class="addBlockRightIcon" matTooltipClass="tooltip" mat-icon-button
            (click)="addBlock('right')">
            <mat-icon>keyboard_arrow_right</mat-icon>
        </button>
        <button [style.color]="block.backgroundColor" matTooltip="Adicionar Bloco Abaixo" [matTooltipPosition]="'below'"
            class="addBlockBelowIcon" matTooltipClass="tooltip" mat-icon-button (click)="addBlock('below')">
            <mat-icon>keyboard_arrow_down</mat-icon>
        </button>
        <button [style.color]="block.backgroundColor" matTooltip="Adicionar Bloco a Esquerda"
            [matTooltipPosition]="'left'" class="addBlockLeftIcon" matTooltipClass="tooltip" mat-icon-button
            (click)="addBlock('left')">
            <mat-icon>keyboard_arrow_left</mat-icon>
        </button>
    </div>

    <app-textarea (resize)="resize($event)" [block]="block"></app-textarea>

    <div class="dragHandle">
        <mat-icon [style.color]="block.backgroundColor">drag_indicator</mat-icon>
    </div>
    <div class="dragHandle darker" cdkDragHandle>
        <mat-icon>drag_indicator</mat-icon>
    </div>
</div>