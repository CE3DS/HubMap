<loading *ngIf="carregando"></loading>
<div *ngIf="!carregando" class="container">
    <div class="mapContainer">
        <display-canvas *ngIf="result" [showOptions]="false" [size]="mapSize" [post]="post">
        </display-canvas>
    </div>

    <div class="detailsContainer layoutDefaultStyle">
        <div class="deco ">
            <p>Detalhes</p>
        </div>
        <br>
        <div class="details" *ngIf="result">

            <div class="header">
                <div class="title">
                    {{post.title}}
                </div>
                <div class="creationInfo">
                    <h4>Criado em {{post.created | date: 'dd/MM/yyyy' }} por {{post.author.nick}}</h4>
                </div>
            </div>

            <div class="description">
                <hr style="height: 1px ;background-color: #316b83;">
                {{post.description}}
            </div>

            <div class="options pushBottom">
                <button (click)="downloadImage()">Baixar Mapa</button>
                <button *ngIf="currentUserMap" class="pushRight" (click)="goToEdit()">Editar</button>
                <button *ngIf="currentUserMap" class="btnDelete btn-danger"
                    (click)="deletePostConfirm()">Excluir</button>
            </div>

        </div>

    </div>
</div>
<div class="comments layoutDefaultStyle">
    <div class="commentsContainer">
        <div class="deco">
            <p>Coment√°rios</p>
        </div>
        <br>
        <div class="postComment">
            <textarea [formControl]="form.controls['content']" class="postTextArea" rows="4"
                [maxlength]="commentMaxLength"></textarea>
            <div class="postActionArea">
                Caracteres: {{form.controls['content'].value.length}} / {{commentMaxLength}}
                <button [disabled]="form.controls['content'].value.length < 3 "
                    [ngClass]="{'btn-disabled': form.controls['content'].value.length < 3}" class="post pushRight"
                    (click)="commentPost()">Postar
                </button>
            </div>
        </div>
        <br>
        <div class="comment" *ngIf="result">
            <comment [order]="1"  (commentMadeEvent)="updateComments()" [postComments]="this.post.comments" [childComments]="getChildComments(comment.id)" [postId]="this.post.id" [comment]="comment" *ngFor="let comment of getPrimaryComments()"></comment>
        </div>
    </div>
</div>